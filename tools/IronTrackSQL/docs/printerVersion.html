<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Untitled Document</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link href="style/irongridStyle.css" rel="stylesheet" type="text/css">

</head>

<body>
<p><img src="images/IronGridlogo.gif"> </p>
<hr align="left" width="650">


<table width="650" border="0">
  <tr>
    <td width="550">
	
	<!-- Begin Content -->

	<a name="overview"></a>
<h1>Introducing IronTrack SQL</h1>
  <p>In typical application development, the greatest sources of performance deficiencies are the network connection and database access. Applications with numerous calls often suffer major performance bottlenecks due to excessive or slow running SQL. Depending on the type of application developed, other factors, such as disk I/O, may also impact overall system performance. Sending requests over the wire (network I/O) and retrieving data from persistent storage (reading and writing to the database) are often the culprits for poor performance.</p>

  <p>With the inability to view the actual execution of SQL transactions, such bottlenecks are often difficult to diagnose. These performance problems are most often detected in the testing environment, or even later, in the production environment, creating costly debugging efforts and changes to the source code.</p>

  <p>Using IronTrack SQL, you can diagnose and correct common database performance issues. By gaining access to the data you need to analyze, you can optimize application performance and improve the efficiency of your SQL statements. IronTrack SQL provides a way for you to improve the performance of your applications in the following ways:</p>

<ul>
  <li>By pinpointing unnecessary database calls and other potential bottlenecks.</li>
  <li>By comparing and analyzing performance over time from release to release or build to build.</li>
  <li>By automatically testing performance in regularly scheduled builds using Ant integration.</li>
</ul>

 

<p>From this document, you can access the following information:</p>

<ul>
  <li><a href="#overview_analyzing">Analyzing and Optimizing Performance</a></li>
  <li><a href="#overview_visibility">IronTrack SQL Visibility</a></li>
  <li><a href="#overview_benefits">IronTrack SQL Benefits</a></li>
</ul>

<a name="overview_analyzing"></a>
<h2>Analyzing and Optimizing Performance</h2>

  <p>Most application servers allow you to tune your system configuration to minimize database access for better runtime performance. However tuning requires visibility into the root of the problem. IronTrack SQL provides that visibility.</p>

  <p>Without changing code or using complex profiling techniques, IronTrack SQL provides instant visibility to your SQL traffic using an intuitive user interface. You can examine all the SQL calls in a JDBC connection and quickly identify database access bottlenecks. IronTrack SQL provides all the data you need to measure and enhance the performance of your application.</p>

<h3>Minimizing Unnecessary Database Calls</h3>

  <p>Generating numerous database calls, each transmitted to a remotely located database, could severely impact performance. For example, if you read two properties from one hundred EJBs, such as <i>first name</i> and <i>last name</i>, you are making a database call every time and are potentially generating two hundred separate calls, each of which could be transmitted to a remotely located database.</p>

  <p>Every call to the database incurs a cost. To avoid running the exact same query tens or hundreds of times within a few seconds, you can use IronTrack SQL to identify and cache data that is not going to change in memory. You can easily sort by SQL statement or by the number of executions and quickly find good candidates for application-level caching, or simply unnecessary inquiries to the database.</p>

  <p>While a caching infrastructure to save connections to the database is important, when you must connect to the database, you can use IronTrack SQL to identify queries that are run more times than necessary.</p>

  <p>You can also use IronTrack SQL to locate and question suspicious queries. For example:</p>

    <ul>
	
	  <li>Why are you running queries that only return an ID?</li>
	
	  <li>Do you also have other queries that are keyed off an ID? </li>
	
	  <li>For queries that return too much data and that have excessively long retrieval times, are you returning more than you need?</li>
	
	</ul>

  <p>Although it may be tempting to store code in the database because it provides a single point of contact and each application benefits from the centralized functionality, it is often inefficient. IronTrack SQL cannot determine what occurs internally in a stored procedure, but it can demonstrate that a callable statement is taking a long time to execute, and you can then look for problems within the procedure. IronTrack SQL can also identify when you are using too many different SQL queries where one would suffice, which reduces your total number of queries and leverages the database SQL.</p>

<a name="overview_visibility"></a>

<h2>The IronTrack SQL Approach</h2>

  <p>Sometimes a practice works in one situation and does not in another. Your database configuration; its size; whether it is embedded, local, or remote; and the types of queries you are running all can change how you approach tuning. IronTrack SQL lets you perform empirical measures. You can make changes to your code, re-run it, and see the impact of your changes. Each snapshot can be analyzed side by side.</p>

  <!--p>Created by developers for developers, IronTrack SQL exposes all of the SQL being generated by an application and summarizes the information in a simple, easy to understand interface. Without changing a line of application code, you can instantly identify excessive SQL statements or long running SQL statements being generated by your EJBs, JDBC calls, or O/R mapping tool. With early visibility, you can correct performance problems early on in the development cycle, rather than during testing or production in which diagnosing and resolving the same issues is far more complex, time consuming, and costly.</p-->

  <p>IronTrack SQL works with any application using JBDC, any database, and requires no code changes. IronTrack SQL integrates with existing build processes to provide continuous performance by analyzing the SQL generated by unit tests and looking for newly introduced code early in development cycle that may be causing performance problems.</p>

  <p>IronTrack SQL can track all the SQL that flows between an application and a database through a GUI console, log files, or both.</p>

<a name="overview_benefits"></a>

<h2>IronTrack SQL Benefits</h2>

<p>IronTrack SQL provides the following features:</p>

<ul>
  <li>A fully interactive user interface with reports and graphs.</li>
  <li>A way to visually identify long running SQL statements by preparation, execution, and retrieval time.</li>
  <li>A way to visually identify excessively executed queries.</li>
  <li>A detailed analysis of any SQL statement, comparing it with the system average.</li>
  <li>A solution that works with any application using JDBC, any database, and requires no code changes.</li>
  <li>Timeline analysis &mdash; queries are arranged as they occur in time, providing a way for you to analyze interaction between queries, periods of high utilization, and so on.</li>
  <li>A way to compare two snapshots of performance data side by side.</li>
  <li>Expanded Ant task functionality that provides a way for you to assert on variances from baseline performance.</li>
</ul>

<p>IronTrack SQL includes technology that enables visibility into the SQL transactions flowing between an application and the database. With its own Virtual JDBC Driver, it implements all of the methods and classes of a standard JDBC native driver, but does not require specific knowledge of the actual database. IronTrack SQL can intercept all API calls from any Java application that use the JDBC API to access a database without having to rewrite the application or the database.</p>

<a name="install"></a>

<h1>Installing IronTrack SQL</h1>

<p>This document describes how to install both the server and client components of IronTrack SQL. If the application server you will be using resides on the same system as the one on which you will run the IronTrack SQL client, you can install both components on that system. You can also install the client and server components on separate systems.</p>

<p>IronTrack SQL offers many advanced configuration options. For more information, see <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>

<p>From this document, you can access the following information:</p>

<ul>
        <li><a href="#install_process">The Installation Process</a></li>
        <li><a href="#install_running">Initiating IronTrack SQL Installation</a></li>
        <li><a href="#install_start_client">Starting the IronTrack SQL Client</a></li>
        <li><a href="#install_preinstall">Pre-Installation for the IronTrack SQL Server Component</a></li>
        <li><a href="#install_unspecified">Installing IronTrack SQL on an Unspecified Application Server</a></li>
  <li><a href="#install_preinstall_app_servers">Installing IronTrack SQL on Supported Application Servers</a></li>
        <li><a href="#install_uninstall">Uninstalling IronTrack SQL</a></li>
        <li><a href="#install_upgrade">Upgrading IronTrack SQL</a></li>
        <li><a href="#install_upgrade_appserver">Upgrading a Current IronTrack SQL Server Installation</a></li>
</ul>

<a name="install_process"></a>

<h2>The Installation Process</h2>

<p>The IronTrack SQL installation process begins after you have downloaded the <b>irontracksql-installer.jar</b> file to the Desktop. From there, the installation process consists of the following steps:</p>

<ol>
  <li>Run the <b>irontracksql-installer.jar</b> file to start the installer for IronTrack SQL and extract the files you will need for installing and configuring  the system.</li>
  <li>Copy the server configuration files to your application server. (See the installation process for your application server to determine where to copy these files.)</li>
  <li>Set the classpath on your application server to recognize the configuration files.</li>
  <li>Wrap your application server's database driver by editing the application server's database driver file to use the IronTrack SQL database driver and the IronTrack SQL server configuration to use the application server's driver.</li>
  <li>Make sure that the port number defined in the IronTrack SQL server configuration matches that of the client.</li>
</ol>

<p>After you have completed the installation process for your specific application server, you can begin using IronTrack SQL to monitor and manage the performance of your application's SQL statements.</p>

<a name="install_running"></a> 

<h2>Initiating IronTrack SQL Installation</h2>

<p>To begin installing IronTrack SQL</p>

<ol>
  <li>From the Desktop, double-click the <b>irontracksql-installer.jar</b> file.<br>
  &mdash; OR &mdash;<br>
  From a command prompt, enter <b>java -jar irontracksql-installer.jar</b> from a command line to display the IronGrid Java installer.</li>
  <li>Use the down arrow to select the language to use, and click <b>OK</b> to display the welcome page.</li>
  <li>Click <b>Next</b> to display the IronGrid software license agreement.</li>
  <li>After reading the license agreement, select the radio button to accept the terms and click <b>Next</b> to display the installation path for IronTrack SQL.</li>
  <li>Enter an installation path.<br>
  &mdash; OR &mdash;<br>
  Click the <b>Browse</b> button to select an installation path.<br>
  <b>Note</b>: If it does not already exist on your system, the installer will create the new path.</li>
  <li>Click <b>Next</b> to display the <b>Installation progress</b> screen.</li>
  <li>When the installation process is complete, click <b>Next</b> to display a list of program groups in which you can add a shortcut to the IronTrack SQL client.</li>
  <ol type="a">
    <li>In the <b>Select a Program Group for the Shortcuts</b> section, click on a program group in which to include a shortcut.</li>
    <li>For Windows: You optionally can select or deselect the <b>Create shortcut on the desktop</b> check box.</li>
	<li>Click <b>Create Shortcuts</b>.</li>
  </ol>
  <li>Click the <b>Quit</b> button to exit the installer.</li>
</ol>

<a name="install_start_client"></a> 

<h2>Starting the IronTrack SQL Client</h2>

<p>To continue installing the IronTrack SQL server component, you will need to run the client component.</p>

<p>To start the client component, from the Desktop, double-click on the <b>IronTrack SQL</b> shortcut to display the IronTrack SQL user interface, or run <b>java -jar irontracksql.jar</b> from the command line.</p>

<p><img src="images/clientView.jpg" alt="" border="0"></p>

<a name="install_preinstall"></a> 

<h2>Pre-Installation for the IronTrack SQL Server Component</h2>

<p>The server component of IronTrack SQL includes specific installation instructions for each of the supported application servers. Before installing the server component, ensure that your environment meets the requirements defined in the following sections.</p>

<ul>
  <li><a href="#install_preinstall_os">Supported Platform Operating Systems</a></li>
  <li><a href="#install_preinstall_app_servers">Supported Application Servers</a></li>
  <li><a href="#install_preinstall_system_reqs">System Requirements</a></li>
  <li><a href="#install_preinstall_dir_structure">Directory Structure</a></li>
</ul>

<a name="install_preinstall_os"></a> 

<h3>Supported Platform Operating Systems</h3>

<p>IronTrack SQL is supported on most Windows, UNIX, and Linux operating systems. IronTrack SQL is supported on any Java supported platform running a minimum of JDK 1.3, with JDK 1.4 recommended.</p>

<p><b>Note</b>: You must have Java installed prior to installing IronTrack SQL.</p>

<a name="install_preinstall_app_servers"></a> 

<h3>Supported Application Servers</h3>

<p>IronTrack SQL supports the following application servers:</p>
<!--p><b>Note</b>: Clicking on the version number of the application server in the following table takes you to the directions for installing IronTrack SQL on that system.</p-->

<p><b>Note</b>: Your installation may differ from the following examples, depending on how your application server environment is configured.</p>

<table cellspacing="2" cellpadding="2" border="1" frame="box">
  <tr valign="left">
    <th>Application Server 
    <th>Version </tr>
  <tr valign="left">
    <td>JBoss</td>
    <td><a href="#install_jboss2x">2.x</a>, <a href="#install_jboss3x">3.x</a></td>
  </tr>
  <tr valign="left">
    <td>Oracle9iAS Container for J2EE (OC4J)</td>
    <td><a href="#install_oracle9iAS">9.0.3</a></td>
  </tr>
  <tr valign="left">
    <td>Jakarta Tomcat</td>
    <td><a href="#install_tomcat">3.x</a></td>
  </tr>
  <tr valign="left">
    <td>JOnAS EJB</td>
    <td><a href="#install_jonas_ejb">2.3.x</a></td>
  </tr>
  <!--tr valign="left">
    <td>BEA WebLogic Portal</td>
    <td><a href="#install_bea_portal40">4.0</a></td>
  </tr-->
  <tr valign="left">
    <td>BEA WebLogic</td>
    <td><a href="#install_bea_portal40">4.0</a>, <a href="#install_bea51">5.1</a>, <a href="#install_bea_server61">6.1</a>, 
      <a href="#install_bea_server70">7.0</a></td>
  </tr>
  <tr valign="left">
    <td>ATG Dynamo</td>
    <td><a href="#install_atg">5.1</a></td>
  </tr>
  <tr valign="left">
    <td>Sun iPlanet</td>
    <td><a href="#install_sun">6.0</a></td>
  </tr>
  <tr valign="left">
    <td>IBM WebSphere</td>
    <td><a href="#install_ibm">4.0</a></td>
  </tr>
  <tr valign="left">
    <td>Caucho Resin</td>
    <td><a href="#install_caucho">2.1.x</a></td>
  </tr>
</table>

<p>IronTrack SQL also supports unspecified application servers and applications that do not run on application servers. For more information, see <a href="#install_unspecified">Installing IronTrack SQL on an Unspecified Application Server</a>.</p>

<a name="install_preinstall_system_reqs"></a> 

<h3>System Requirements</h3>

<p>IronTrack SQL requires the following minimum disk space and memory:</p>

<ul>
  <li>Disk Space &mdash; 5MB</li>
  <li>Memory &mdash; 120MB</li>
</ul>

<p><b>Note</b>: Logging is enabled by default, and the IronTrack SQL log file, <b>spy.log</b>, can get very large. To accommodate the growth of <b>spy.log</b>, it is recommended that you reserve significant disk space beyond these minimum requirements. For information on disabling logging, see <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>

<a name="install_preinstall_dir_structure"></a>

<h3>Directory Structure</h3>

<p>Following is the directory structure of IronTrack SQL:</p>

<blockquote> 
  <p class="code"> IronTrack SQL<br>
    &nbsp;&nbsp;docs<br>
    &nbsp;&nbsp;ico<br>
    &nbsp;&nbsp;license<br>
    &nbsp;&nbsp;lib<br>
    &nbsp;&nbsp;Uninstaller<br>
    irongrid.properties<br>
    irontracksql.jar<br>
    log4j-1.2.8.jar<br>
    p6spy.jar<br>
    spy.properties<br>
  </p>
</blockquote>

<p>The <b>/docs</b> directory contains 	<b>releaseNotesIronTrackSQL.html</b> and the HTML help files for IronTrack SQL. You can open <b>index.html</b> to view all of the files in the IronTrack SQL help system.</p>

<p>The <b>/ico</b> directory contains the following files:</p>

<blockquote> 
  <p class="code"> irongrid.ico<br>
    uninstall.ico<br>
  </p>
</blockquote>

<p>The <b>/lib</b> directory contains the following files:</p>

<blockquote> 
  <p class="code"> alloy.jar<br>
    commons-pool.jar<br>
    jakarta-regexp-&lt;version&gt.jar<br>
    janino.jar<br>
    jce-jdk&lt;version&gt;.jar<br>
    jcommon&lt;version&gt;.jar<br>
    jdom.jar<br>
    jfreechart&lt;version&gt;.jar<br>
    layout.jar<br>
    nanoxml.jar<br>
    nanoxml-sax.jar<br>
    sax2.jar<br>
    sax2-ext.jar<br>
  </p>
</blockquote>

<p>The <b>/license</b> directory contains the following files:</p>

<blockquote>
  <p class="code">apache-license-1.1.txt<br>
  GNU-LGPL-2.1.txt<br>
  izpack-license.txt<br>
  janino.txt<br>
  jdom-license.txt<br>
  nanoxml-license.txt<br>
  p6spy-license.txt<br>
  </p>
</blockquote>

<p>The <b>/Uninstaller</b> directory contains the following files:</p>

<blockquote> 
  <p class="code"> uninstaller.jar </p>
</blockquote>

<a name="install_unspecified"></a> 

<h2>Installing IronTrack SQL on an Unspecified Application Server</h2>

<p>The following installation instructions are intended for use with application servers not listed previously and applications that do not use application servers.</p>

<p>To install IronTrack SQL on an unspecified application server</p>

<ol>
  <li>Run the <b>irontracksql-installer.jar</b> file. Refer to <a href="#install_running">Running the IronTrack SQL Installer</a>.<br></li>
  </ul>
  <li>Copy the <b>irontracksql.jar</b>, <b>p6spy.jar</b>, and <b>log4j-1.2.8.jar</b> files in your classpath by copying them to your <b>ext</b> directory. If you are using an EJB server it probably has its own <b>ext</b> directory. If you are not using an EJB server, use the JDK <b>ext</b> directory (<b>JDK_HOME/jre/lib/ext</b>) or add them to your system classpath.</li>
  <p><b>Note</b>: If you are adding <b>irontracksql.jar</b> and <b>p6spy.jar</b> to your classpath, you must reference the JAR filename directly. For example:</p>
  <p class="code">CLASSPATH=c:\irontrack\irontracksql.jar.</p>
  <p><b>Note</b>: If you are using an EJB server, adding the <b>irontracksql.jar</b> file and <b>p6spy.jar</b> file to your system classpath may not work. Some EJB servers ignore the system classpath, setting their own on startup.</p>
  <li>Move <b>spy.properties</b> into a directory listed in your classpath. For example, if your classpath is <b>C:\irontrack\irontracksql.jar;c:\java</b>, copy it to the <b>java</b> directory. Unlike JAR files, you do not directly reference your property file in the classpath.</li>
  <li>Modify your application server or application to use the P6Spy database driver.</li>
  <li>Modify the <b>realdriver</b> line in the <b>spy.properties</b> file to reflect your wrapped  database driver. For example:</li>
  <p class="code">realdriver=weblogic.jdbc.oci.Driver </p>
  <p><b>Note</b>: The value in the previous line is just an example. You must use the actual driver value provided in the application server. You also can wrap a data source. For information on wrapping a data source, see Data Source Replacement in <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>
  <li>Set the port number through which IronTrack SQL will communicate in the <b>spy.properties file</b>, as follows:</li>
  <p class="code">monitorport=<i>nnnn</i></p>
  <p>where <i>nnnn</i> is the IronTrack SQL port number; from the IronTrack SQL user interface, click on the <b>Config</b> button or select <b>Configure</b> from the <b>Server</b> to display the <b>Configuration</b> dialog, which displays the port number.</p>
  <p><img src="images/configDialog.jpg"  alt="" border="0"></p>
</ol>

<p>When you run your application, a log file (<b>spy.log</b>) is generated. The log file contains a list of all of the database statements executed. You can change both the destination of <b>spy.log</b> and what it logs by editing the <b>spy.properties</b> file. Refer to <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>

<a name="install_jboss2x"></a> 

<h2>Installing IronTrack SQL on JBoss 2.x</h2>

<p>To install IronTrack SQL on the JBoss 2.x server</p>

<ol>
  <li>Run the <b>irontracksql-installer.jar</b> file. Refer to <a href="#install_running">Running the IronTrack SQL Installer</a>.</li>
  <li>Copy the <b>irontracksql.jar</b>, <b>p6spy.jar</b>, and <b>log4j-1.2.8.jar</b> files from the top-level IronTrack SQL directory to your <b>\ext</b> directory. For example:</li>
  <p class="code">C:\JBoss-2.2.2_Tomcat-3.2.2\jboss\lib\ext</p>
  <li>Move the <b>spy.properties</b> file to your <b>db</b> directory, which is part of the JBoss classpath. For example:</li>
  <p class="code">C:\JBoss-2.2.2_Tomcat-3.2.2\jboss\db</p>
  <li>Modify the <b>jboss.jcml</b> file in the Tomcat <b>conf</b> directory to use the IronTrack SQL driver.</li>
  <ol type="a">
    <li>Remove your existing driver from the <b>Drivers</b> attribute.</li>
    <li>Replace it with the P6Spy driver. Following is an example of an edited <b>jboss.jcml</b> file:</li>
    <p class="code">&lt;mbean code="org.jboss.jdbc.JdbcProvider"name="DefaultDomain:service=JdbcProvider"&gt;<br>
      &lt;attribute name="Drivers"&gtcom.p6spy.engine.spy.P6SpyDriver&lt;/attribute&gt;<br>
      &lt;/mbean&gt;</p>
  </ol>
  <li>Modify the <b>realdriver</b> line in the <b>spy.properties</b> file to reflect your wrapped  database driver. For example:</li>
  <p class="code">realdriver=oracle.jdbc.driver.OracleDriver</p>
  <p><b>Note</b>: The value in the previous line is just an example. You must use the actual driver value provided in the application server.</p>
  <li>Set the port number through which IronTrack SQL will communicate in the <b>spy.properties file</b>, as follows:</li>
  <p class="code">monitorport=<i>nnnn</i></p>
  <p>where <i>nnnn</i> is the IronTrack SQL port number; from the IronTrack SQL user interface, click on the <b>Config</b> button or select <b>Configure</b> from the <b>Server</b> menu to display the <b>Configuration</b> dialog, which displays the port number.</p>
  <p><img src="images/configDialog.jpg"  alt="" border="0"></p>
</ol>
<p>When you run your application, a log file (<b>spy.log</b>) is generated in the bin directory of the JBoss server. The log file contains a list of all of the database statements executed. You can change both the destination of spy.log and what it logs by editing the spy.properties file; refer to <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>
<a name="install_jboss3x"></a> 
<h2>Installing IronTrack SQL on JBoss 3.x</h2>
<p>To install IronTrack SQL on JBoss 3.x</p>
<p><b>Note</b>: The following procedure assumes you are using the default server residing in <b>JBOSS_DIST\server\default</b>, in which <b>JBOSS_DIST</b> is the directory in which JBoss is installed. These instructions are intended for wrapping driver services, not XADataSource services. </p>
<ol>
  <li>Run the <b>irontracksql-installer.jar</b> file. Refer to Running the <a href="#install_running">IronTrack SQL Installer</a>.</li>
  <li>Copy the <b>irontracksql.jar</b>, <b>p6spy.jar</b>, and <b>log4j-1.2.8.jar</b> files from the top-level IronTrack SQL directory to your <b>\ext</b> directory of your server. For example:</li>
  <p class="code">C:\java\jboss-3.0.4\server\default\lib </p>
  <li>Add <b>spy.properties</b> to your JBoss classpath. By default, the JBoss classpath set up by <b>run.bat</b> only points to <b>tools.jar</b> and <b>run.jar</b>. 
    You may need to add a directory, via <b>JBOSS_CLASSPATH</b>, to this path. Following is an example of an edited JBoss classpath:</li>
  <p class="code">C:\> set JBOSS_CLASSPATH=C:\java\jboss-3.0.4\server\default\db</p>
  <p class="code">C:\> copy C:\java\irontrack\spy.* C:\java\jboss-3.0.4\server\default\db</p>
  <li>Create an <b>irontrack-service.xml</b> file in <b>JBOSS_DIST\server\deploy</b>.</li>
  <li>Set the <b>config-property</b> element named DriverClass to P6SpyDriver in <b>irontrack-service.xml</b>, by basing a new XML file on one of the examples in the <b>JBOSS_DIST\docs\examples\jca</b> directory. You can also configure <b>JndiName</b> and <b>ConnectionURL</b> for your specific implementation. An example of the pertinent portions (not the complete XML file) of a <b>irontrack-service.xml</b> file follows:</li>
  <p class="code">&lt;attribute name="JndiName"&gt;MySqlDS&lt/attribute&gt;<br>
    &lt;attribute name="ManagedConnectionFactoryProperties"&gt;<br>
    &lt;properties&gt<br>
    &lt;config-property name="ConnectionURL" type="java.lang.String"&gt;jdbc:mysql://localhost/localdb&lt;/config-property&gt;<br>
&lt;config-propertyname="DriverClass"type="java.lang.String"&gt;com.p6spy.engine.spy.P6SpyDriver&lt;/config-property&gt;<br>
    .<br>
    .<br>
    .</p>
  <p><b>Note</b>: Make sure there is not a service that explicitly loads the wrapped driver. A service of this type will load the specified driver before P6SpyDriver, resulting in unwrapped connections.</p>
  <li>Modify the <b>realdriver</b> line in the <b>spy.properties</b> file to reflect your wrapped  database driver. For example:</li>
  <p class="code">realdriver=org.gjt.mm.musql.Driver </p>
  <p><b>Note</b>: The value in the previous line is just an example. You must use the actual driver value provided in the application server.</p>
  <li>Set the port number through which IronTrack SQL will communicate in the <b>spy.properties file</b>, as follows:</li>
  <p class="code">monitorport=<i>nnnn</i></p>
  <p>where <i>nnnn</i> is the IronTrack SQL port number; from the IronTrack SQL user interface, click on the <b>Config</b> button or select <b>Configure</b> from the <b>Server</b> to display the <b>Configuration</b> dialog, which displays the port number.</p>
  <p><img src="images/configDialog.jpg"  alt="" border="0"></p>
</ol>
<p>When you run your application, a log file (<b>spy.log</b>) is generated in the <b>bin</b> directory of the JBoss server. The log file contains a list of all of the database statements executed. You can change both the destination of <b>spy.log</b> and what it logs by editing the <b>spy.properties</b> file. Refer to <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>

<a name="install_oracle9iAS"></a> 

<h2>Installing IronTrack SQL on Oracle9iAS Container for J2EE</h2>

<p>To install IronTrack SQL on Oracle9iAS Container for J2EE (OC4J)</p>

<ol>
  <li><li>Run the <b>irontracksql-installer.jar</b> file. Refer to <a href="#install_running">Running the IronTrack SQL Installer</a>.</li>
  <li>Copy the <b>irontracksql.jar</b>, <b>p6spy.jar</b>, <b>spy.properties</b>, and <b>log4j-1.2.8.jar</b> files from the top-level IronTrack SQL directory to your <b>\ext</b> directory.</li>
  <li>Modify the <b>data-sources.xml</b> file located in the <b>&lt;OC4J-HOME&gt;/J2EE/home/config</b> directory by setting the P6SpyDriver as the default JDBC driver as shown in     the <b>connection-driver</b> attribute in the following example:</li>
  <p class="code">&lt;data-source name="oracleDS" class="com.evermind.sql.DriverManagerDataSource" connection-driver="com.p6spy.engine.spy.P6SpyDriver" location="jdbc/oracleDS"     ejb-location="jdbc/oracleDS" xa-location="jdbc/xa/oracleXADS" url="jdbc:oracle:thin:@localhost:1521:oracleDS" inactivity-timeout="30" username="sonntag" password="shatta17"/&gt;</p>
  <li>Modify the <b>realdriver</b> line in the <b>spy.properties</b> file to reflect your wrapped database driver. (This is the original value specified in <b>connection-driver</b>.) For example, if <b>Orcle.JDBC.driver.OracleDriver.jdbcDriver</b> (the default database) was the original <b>connection-driver</b> value, the <b>realdriver</b> value is set to <b>Oracle.JDBC.driver.OracleDriver</b>.</li>
  <li>Set the port number through which IronTrack SQL will communicate in the <b>spy.properties file</b>, as follows:</li>
  <p class="code">monitorport=<i>nnnn</i></p>
  <p>where <i>nnnn</i> is the IronTrack SQL port number; from the IronTrack SQL user interface, click on the <b>Config</b> button or select <b>Configure</b> from the <b>Server</b> to display the <b>Configuration</b> dialog, which displays the port number.</p>
  <p><img src="images/configDialog.jpg" alt="" border="0"></p>
  <li>When starting the server, run the following command to indicate to OC4J where the <b>spy.properties</b> file is located:</li>
  <p class="code">java -Dp6.home=OC4J/J2EE/home/lib</p>
</ol>
<p>When you run your application, a log file (<b>spy.log</b>) is generated in the <b>&lt;OC4J-HOME&gt;/J2EE/home/lib</b> directory of the OC4J server. The log file contains a list of all of the database statements executed. You can change both the destination of spy.log and what it logs by editing the spy.properties file. Refer to <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>

<a name="install_tomcat"></a> 

<h2>Installing IronTrack SQL on Jakarta Tomcat 3.x</h2>

<p>To install IronTrack SQL on Jakarta Tomcat 3.x</p>

<p><b>Note</b>: Since you typically write or otherwise obtain your own Connection Pool when using Tomcat, this procedure may differ by application.</p>

<ol>
  <li>Run the <b>irontracksql-installer.jar</b> file. Refer to <a href="#install_running">Running the IronTrack SQL Installer</a>.</li>
  <li>Move the <b>irontracksql.jar</b>, <b>p6spy.jar</b>, and <b>log4j-1.2.8.jar</b> files from the top-level IronTrack SQL directory to the <b>\lib</b> directory of your web application. For example:
  <p class="code">C:\jakarta-tomcat-3.2.1\webapps\p6\WEB-INF\lib </p></li>
  <li>Copy <b>spy.properties</b> to the <b>\classes</b> directory.
  <p class="code">C:\jakarta-tomcat-3.2.1\webappp6\WEB-INF\classes</p></li>
  <li>Modify Tomcat to use the P6Spy driver. Tomcat applications obtain their JDBC connection in a variety of ways. Most applications have the database driver name externalized as a configuration parameter. For example, in your <b>web.xml</b> file (which resides in <b>C:\jakarta-tomcat-3.2.1\webapps\p6\WEB-INF</b>) you may have something similar to the following:</li>
  <p class="code">&lt;init-param&gt;<br>
    &nbsp;&nbsp;&lt;param-name&gtdatabaseDriver&lt;/param-name&gt;<br>
    &nbsp;&nbsp;&lt;param-value&gt;org.gjt.mm.mysql.Driver&lt;/param-value&gt;<br>
    &lt;/init-param&gt;</p>
  <p>In this case, the <b>databaseDriver</b> parameter has a value of <b>org.gjt.mm.mysql.Driver</b>, which is the MySql driver. Wherever this configuration information is stored, change the driver name (<b>org.gjt.mm.mysql.Driver</b>, in this example) to <b>com.p6spy.engine.spy.P6SpyDriver</b>:</p>
  <p class="code">&lt;init-param&gt;<br>
    &nbsp;&nbsp;&lt;param-name&gtdatabaseDriver&lt;/param-name&gt;<br>
    &nbsp;&nbsp;&lt;param-value&gt;com.p6spy.engine.spy.P6SpyDriver&lt;/param-value&gt;<br>
    &lt;/init-param&gt;</p>
  <li>Modify the <b>realdriver</b> line in the <b>spy.properties</b> file to reflect your wrapped  database driver. For example:</li>
  <p class="code">realdriver=org.gjt.mm.mysql.Driver</p>
  <p><b>Note</b>: The value in the previous line is just an example. You must use the actual driver value provided in the application server.</p>
  <li>Set the port number through which IronTrack SQL will communicate in the <b>spy.properties file</b>, as follows:</li>
  <p class="code">monitorport=<i>nnnn</i></p>
  <p>where <i>nnnn</i> is the IronTrack SQL port number; from the IronTrack SQL user interface, click on the <b>Config</b> button or select <b>Configure</b> from the <b>Server</b> to display the <b>Configuration</b> dialog, which displays the port number.</p>
  <p><img src="images/configDialog.jpg" alt="" border="0"></p>
</ol>

<p>When you run your application, a log file (<b>spy.log</b>) is generated in the directory from which you launched the application. The log file contains a list of all of the database statements executed. You can change both the destination of <b>spy.log</b> and what it logs by editing the <b>spy.properties</b> file. Refer to <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>

<a name="install_jonas_ejb"></a> 

<h2>Installing IronTrack SQL on JOnAS EJB </h2>

<p>To install IronTrack SQL on JOnAS EJB 2.3x</p>

<ol>
  <li>Run the <b>irontracksql-installer.jar</b> file. Refer to <a href="#install_running">Running the IronTrack SQL Installer</a>.<br></li>
  <li>Include the <b>irontracksql.jar</b> file in the classpath of the JOnAS EJB server. For example, if <b>irontracksql.jar</b> is in the <b>/opt/Provider6</b> directory, add <b>/opt/Provider6/irontracksql.jar</b> to the <b>XTRA_CLASSPATH</b> environment variable or directly edit the <b>config_env</b> script. </li>
  <li>Move <b>spy.properties</b> to a directory that is part of your classpath. It is recommended that you move it to the directory in which your <b>jndi.properties</b> file resides.</li>
  <li>Modify the <b><i>datasource</i>.properties</b> file (where <i>datasource</i> is the name of the data source) by replacing the database driver classname with the P6Spy database driver classname in the <b>datasource.classname</b> property. For example, update the <b>Oracle1.properties</b> file delivered with JOnAS by replacing <b>oracle.jdbc.driver.OracleDriver</b> with <b>com.p6spy.engine.spy.P6SpyDriver</b>. For example: </li>
  <p class="code">datasource.name jdbc_1 datasource.description "Standard jdbc driver for Oracle" datasource.url jdbc:oracle:thin:scott/tiger@maltes:1521:ORA1 datasource.classname com.p6spy.engine.spy.P6SpyDriver ... </p>
  <p><b>Note</b>: Database access configuration within JOnAS is described in a DataSource property file, such as <b>Oracle1.properties</b>. Refer to the <i>JOnAS Bean Programmer’s Guide</i> for more details. </p>
  <li>Modify the <b>realdriver</b> line in the <b>spy.properties</b> file to reflect your wrapped  database driver. For example:</li>
  <p class="code">realdriver=oracle.jdbc.driver.OrcleDriver</p>
  <p><b>Note</b>: The value in the previous line is just an example. You must use the actual driver value provided in the application server.</p>
  <li>Set the port number through which IronTrack SQL will communicate in the <b>spy.properties file</b>, as follows:</li>
  <p class="code">monitorport=<i>nnnn</i></p>
  <p>where <i>nnnn</i> is the IronTrack SQL port number; from the IronTrack SQL user interface, click on the <b>Config</b> button or select <b>Configure</b> from the <b>Server</b> to display the <b>Configuration</b> dialog, which displays the port number.</p>
  <p><img src="images/configDialog.jpg" alt="" border="0"></p>
</ol>

<p>When you run your application, a log file (<b>spy.log</b>) is generated in the directory from which you launched the application. The log file contains a list of all of the database statements executed. You can change both the destination of <b>spy.log </b>and what it logs by editing the <b>spy.properties</b> file. Refer to <a href="configure.html">Advanced Configuration of IronTrack SQL</a>. </p>

<!--a name="install_bea"></a> 

<h2>Installing IronTrack SQL on BEA WebLogic</h2>

<p>The following sections contain specific information for installing IronTrack SQL on the following application servers:</p>

<ul>
  <li><a href="#install_bea_portal40">BEA WebLogic Portal 4.0</a></li>
  <li><a href="#install_bea_server61">BEA WebLogic Server 6.1</a></li>
  <li><a href="#install_bea51">BEA WebLogic 5.1</a></li>
</ul-->

<a name="install_bea_portal40"></a> 

<h2>Installing IronTrack SQL on BEA WebLogic Portal 4.0</h2>

<p>To install IronTrack SQL on BEA WebLogic Portal 4.0</p>

<p><b>Note</b>: This example uses the default Stockportal (Avitek) application.</p>

<ol>
  <li>Run the <b>irontracksql-installer.jar</b> file. Refer to <a href="#install_running">Running the IronTrack SQL Installer</a>.<br></li>
  <li>Copy the <b>irontracksql.jar</b>, <b>p6spy.jar</b>, and <b>log4j-1.2.8.jar</b> files from the top-level IronTrack SQL directory to <b><i>bea-home</i>\wlportal4.0\lib\ext</b>, where <i>bea-home</i> is the directory in which BEA WebLogic is installed.</li>
  <li>Add <b>;%P13N_DIR%\lib\ext\irontracksql.jar</b> and <b>;%P13N_DIR%\lib\ext\p6spy.jar</b> to <b>EXT_CLASSPATH</b> in the <b>set-environment.bat</b> file. The <b>set-environment.bat</b> file resides in <b><i>bea-home</i>\wlportal4.0\bin\win32</b>. Do not include any trailing spaces after the new line.</li>
  <li>Move <b>spy.properties</b> to <b><i>bea-home</i>\wlportal4.0\config\portalDomain</b> or to the application domain directory.</li>
  <li>Modify the <b>realdriver</b> line in the <b>spy.properties</b> file to reflect your wrapped  database driver. For example:</li>
  <p class="code">realdriver=weblogic.jdbc.oci.Driver</p>
  <p><b>Note</b>: The value in the previous line is just an example. You must use the actual driver value provided in the application server.</p>
  <li>Set the port number through which IronTrack SQL will communicate in the <b>spy.properties file</b>, as follows:</li>
  <p class="code">monitorport=<i>nnnn</i></p>
  <p>where <i>nnnn</i> is the IronTrack SQL port number; from the IronTrack SQL user interface, click on the <b>Config</b> button or select <b>Configure</b> from the <b>Server</b> to display the <b>Configuration</b> dialog, which displays the port number.</p>
  <p><img src="images/configDialog.jpg" alt="" border="0"></p>
  <li>Add <b>;%P13N_DIR%\config\portalDomain</b> to the classpath in the <b>startPortal.bat</b> file. The path to <b>startPortal.bat</b> is <b><i>bea-home</i>\wlportal4.0\config\portalDomain</b>. Do not include any trailing spaces after the new line. </li>
  <li>Modify WebLogic Portal to use the P6Spy driver. Either modify <b>config.xml</b> (which resides in <b><i>bea-home</i>\wlportal4.0\config\portalDomain</b>) directly or complete the following steps:
  <ol type="a">
    <li>Start WebLogic Portal by running <b>startPortal.bat</b>.</li>
    <li>Start the Administration Console tool by navigating to <b>http://<i>your-host</i>:7501/console</b>, where <i>your-host</i> is the machine on which BEA WebLogic is installed.</li>
    <li>Navigate to the <b><i>your-domain</i> -> Services -> JDBC -> Connection Pools</b> node (where <i>your-domain</i> is the domain name specified during the BEA WebLogic install) and set the Driver Classname for each Connection Pool to <i>com.p6spy.engine.spy.P6SpyDriver</i>.</li>
  </ol></li>
  <li>If you are using RDBMS Security Realm, configure IronTrack SQL to monitor your realms (in this example, <b>commercePool</b>, <b>dataSyncPool</b>, and <b>wlcsRealm</b>) by completing the following steps: 
  <ol type="a">
    <li>Using the Administration Console, navigate to the <i><b>your-domain</b></i> <b>-> Security -> Realms</b> node.</li>
    <li>Select the <b>security</b> realm.</li>
    <li>Click the <b>Database</b> tab.</li>
    <li>Set the <b>Driver</b> parameter to <b>com.p6spy.engine.spy.P6SpyDriver</b>. </li>
  </ol></li>
  <li>Using the Administration Console, shut down WebLogic Portal.</li>
  <li>Right-click on the <b><i>your-domain</i>->Servers-> <i>your-server node</i></b> and select <b>Stop this Server</b> from the pop-up menu.</li>
  <li>Restart WebLogic Portal by running <b>startPortal.bat</b>.</li>
</ol>

<p>When you run your application, a log file (<b>spy.log</b>) is generated in <b><i>bea-home</i>\wlportal4.0</b>. The log file contains a list of all of the database statements executed. You can change both the destination of <b>spy.log</b> and what it logs by editing the <b>spy.properties</b> file. Refer to <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>

<a name="install_bea51"></a> 

<h2>Installing IronTrack SQL on BEA WebLogic 5.1</h2>

<p>To install IronTrack SQL on BEA WebLogic 5.1</p>

<ol>
  <li>Run the <b>irontracksql-installer.jar</b> file. Refer to <a href="#install_running">Running the IronTrack SQL Installer</a>.<br></li>
  <li>Edit <b>startWeblogic.sh</b>, by putting <b>irontracksql.jar</b> and the directory path of <b>spy.properties</b> in the <b>JAVA_CLASSPATH</b>.</li>
  <li>Edit <b>weblogic.properties</b> (Connection Pool), by replacing the JDBC class driver with <b>com.p6spy.engine.spy.P6SpyDriver</b>.</li> 
  <li>Modify the <b>realdriver</b> line in the <b>spy.properties</b> file to reflect your wrapped  database driver. For example:</li>
  <p class="code">realdriver=weblogic.jdbc.oci.Driver </p>
  <p><b>Note</b>: The value in the previous line is just an example. You must use the actual driver value provided in the application server.</p>
  <li>Set the port number through which IronTrack SQL will communicate in the <b>spy.properties file</b>, as follows:</li>
  <p class="code">monitorport=<i>nnnn</i></p>
  <p>where <i>nnnn</i> is the IronTrack SQL port number; from the IronTrack SQL user interface, click on the <b>Config</b> button or select <b>Configure</b> from the <b>Server</b> to display the <b>Configuration</b> dialog, which displays the port number.</p>
  <p><img src="images/configDialog.jpg" alt="" border="0"></p>
</ol>
<p>When you run your application, a log file (<b>spy.log</b>) is generated in the WebLogic home directory. The log file contains a list of all of the database statements executed. You can change both the destination of <b>spy.log</b> and what it logs by editing the <b>spy.properties</b> file. Refer to <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>

<p><a name="install_bea_server61"></a></p>

<h2>Installing IronTrack SQL on BEA WebLogic Server 6.1</h2> 

<p>To install IronTrack SQL on BEA WebLogic Server 6.1</p>
<ol>
  <li>Run the <b>irontracksql-installer.jar</b> file. Refer to <a href="#install_running">Running the IronTrack SQL Installer</a>.<br></li>
  <li>Copy the <b>irontracksql.jar</b>, <b>p6spy.jar</b>, and <b>log4j-1.2.8.jar</b> files from the top-level IronTrack SQL directory to <b><i>bea-home</i>\wlserver6.1\lib\ext</b>, where <i>bea-home</i> is the directory in which BEA WebLogic is installed.</li>
  <li>Move <b>spy.properties</b> to <i><b>bea-home</b></i><b>\wlserver6.1\config\<i>your-domain</i></b>, where <i>your-domain</i> is the domain name specified during the BEA WebLogic install.</li>
  <li>Modify the <b>realdriver</b> line in the <b>spy.properties</b> file to reflect your wrapped  database driver. For example:</li>
  <p class="code">realdriver=weblogic.jdbc.oci.Driver </p>
  <p><b>Note</b>: The value in the previous line is just an example. You must use the actual driver value provided in the application server.</p>
  <li>Set the port number through which IronTrack SQL will communicate in the <b>spy.properties file</b>, as follows:</li>
  <p class="code">monitorport=<i>nnnn</i></p>
  <p>where <i>nnnn</i> is the IronTrack SQL port number; from the IronTrack SQL user interface, click on the <b>Config</b> button or select <b>Configure</b> from the <b>Server</b> to display the <b>Configuration</b> dialog, which displays the port number.</p>
  <p><img src="images/configDialog.jpg" alt="" border="0"></p>
  <li>Add <b>;.\lib\ext\irontracksql.jar;.\lib\ext\p6spy.jar;.\config\&lt;<i>your-domain</i>&gt;</b> to the classpath in the <b>startWebLogic.cmd</b> file.</li>
  <p>The <b>startWebLogic.cmd</b> file resides in <i><b>bea-home</b></i><b>\wlserver6.1\config\<i>your-domain</i></b>. Do not include any trailing spaces after the new line. This adds <b>irontracksql.jar</b> and <b>spy.properties</b> to the classpath.</p>
  <li>Modify WebLogic Server to use the P6Spy driver. Either modify <b>config.xml</b> which resides in <i><b>bea-home</b></i><b>\wlserver6.1\config\<i>your-domain</i></b>)   directly or complete the following steps:
  <ol type="a">
    <li>Start WebLogic Server by running <b>startWebLogic.cmd</b>.</li>
    <li>Start the Administration Console tool by navigating to <b>http://&lt;<i>your-host</i>&gt;:&lt;<i>port number</i>&gt;/console</b>.</li>
    <li>Navigate to the <b><i>your-domain</i> -&gt; Services -&gt; JDBC -&gt; Connection Pools</b> node and set the driver classname for each connection pool to <b>com.p6spy.engine.spy.P6SpyDriver</b>.</li>
  </ol></li>
  <li>If you are using RDBMS Security Realm, configure IronTrack SQL to monitor your realms (in this example, <b>commercePool</b>, <b>dataSyncPool</b>, and <b>wlcsRealm</b>) by completing the following steps:
  <ol type="a">
    <li>Using the Administration Console, navigate to the <i><b>your-domain</b></i> <b>-&gt; Security -&gt; Realms</b> node.</li>
    <li>Select the <b>security</b> realm.</li>
	<li>Click the <b>Database</b> tab.</li>
    <li>Set the <b>Driver</b> parameter to <b>com.p6spy.engine.spy.P6SpyDriver</b>.</li>
  </ol></li>
  <li>Using the Administration Console, shut down WebLogic Server.</li>
  <li>Right-click on the <i><b>your-domain</b></i> <b>-> Servers -> <i>your-server</i></b> node and select <b>Stop this Server</b> from the pop-up menu.</li>
  <li>Restart WebLogic Server by running <b>startWebLogic.cmd</b>.</li>
</ol>

<p>When you run your application, a log file (<b>spy.log</b>) is generated in <i><b>bea-home</b></i><b>\wlserver6.1</b>. The log file contains a list of all of the database statements executed. You can change both the destination of <b>spy.log</b> and what it logs by editing the <b>spy.properties</b> file. Refer to <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>

<a name="install_bea_server70"></a> 

<h2>Installing IronTrack SQL on BEA WebLogic Server 7.0</h2>

<p>To install IronTrack SQL on BEA WebLogic Server 7.0</p>
<ol>
  <li>Run the <b>irontracksql-installer.jar</b> file. Refer to <a href="#install_running">Running the IronTrack SQL Installer</a>.<br></li>
  <li>Copy <b>irontracksql.jar</b>, <b>log4j-1.2.8.jar</b>, <b>p6spy.jar</b> and <b>spy.properties</b> from the top-level IronTrack SQL directory to <b><i>bea-home</i>\weblogic700\server\ext</b>, where <i>bea-home</i> is the directory in which BEA WebLogic is installed.</li>
  <li>Modify the <b>realdriver</b> line in the <b>spy.properties</b> file to reflect your wrapped  database driver. For example:</li>
  <p class="code">realdriver=weblogic.jdbc.oci.Driver </p>
  <p><b>Note</b>: The value in the previous line is just an example. You must use the actual driver value provided in the application server.</p>
  <li>Set the port number through which IronTrack SQL will communicate in the <b>spy.properties file</b>, as follows:</li>
  <p class="code">monitorport=<i>nnnn</i></p>
  <p>where <i>nnnn</i> is the IronTrack SQL port number; from the IronTrack SQL user interface, click on the <b>Config</b> button or select <b>Configure</b> from the <b>Server</b> to display the <b>Configuration</b> dialog, which displays the port number.</p>
  <p><img src="images/configDialog.jpg" alt="" border="0"></p>
  <li>Add the following to the classpath in the script that starts the application to monitor:</li>
  <p class="code"><i>bea-home</i>\weblogic700\server\ext\irontracksql.jar <br>
    <i>bea-home</i>\weblogic700\server\ext\p6spy.jar<br>
    bea-home\weblogic700\server\ext</p>
  <p><b>Note</b>: Do not include any trailing spaces after the new line.</p>
  <li>Modify WebLogic Server to use the P6Spy driver. Either modify <b>config.xml</b> (which resides in <b><i>bea-home</i>\user_projects\<i>your-domain</i></b>) directly or complete the following steps:</li>
  <ol type="a">
    <li>Start WebLogic Server by running <b>startWebLogic.cmd</b>.</li>
    <li>Start the Administration Console tool by navigating to <b>http://<i>app_server-host</i>:<i>port_number</i>/console</b>, where <i>app_server-host</i> is the name of the system on which the application server is running, and <i>port_number</i> is the port number through which the applications server communicates.</li>
    <li>Navigate to the <b><i>your-domain</i> -> Services -> JDBC -&> Connection Pools</b> node and set the driver classname for each connection pool to <b>com.p6spy.engine.spy.P6SpyDriver</b>.</li>
  </ol>
  <li>If you are using RDBMS Security Realm, configure IronTrack SQL to monitor your realms (in this example, <b>commercePool</b>, <b>dataSyncPool</b>, and <b>wlcsRealm</b>) by completing the following steps:</li>
  <ol type="a">
    <li>Using the Administration Console, navigate to the <b><i>your-domain</i> -&gt; Security -&gt; Realms</b> node. Select the <b>security</b> realm.</li>
    <li>Click the <b>Database</b> tab.</li>
    <li>Set the Driver parameter to <b>com.p6spy.engine.spy.P6SpyDriver</b>.</li>
  </ol>
  <li>Using the Administration Console, shut down WebLogic Server.</li>
  <li>Right-click on the <b><i>your-domain</i> -> Servers -> <i>your-server</i></b> node and select <b>Stop this Server</b> from the pop-up menu.</li>
  <li>Restart WebLogic Server by running <b>startWebLogic.cmd</b>.</li>
</ol>

<p>When you run your application, a log file (<b>spy.log</b>) is generated in <b>bea-home\weblogic700\server\ext</b>. The log file contains a list of all of the database statements executed. You can change both the destination of spy.log and what it logs by editing the spy.properties file. For more information, see <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>

<a name="install_atg"></a>

<h2>Installing IronTrack SQL on ATG Dynamo</h2>

<p>To install IronTrack SQL on ATG Dynamo</p>

<ol>
  <li>Run the <b>irontracksql-installer.jar</b> file. Refer to <a href="#install_running">Running the IronTrack SQL Installer</a>.<br></li>
  <li>Start the ATG Dynamo application server and your database.</li>
  <li>Modify the ATG Dynamo server to include <b>irontracksql.jar</b> and <b>spy.properties</b> in its classpath by completing the following steps:</li>
  <ol type="a">
    <li>Run the Admin Tool by logging in to <b>http://localhost:8830</b>. (This URL is an example that assumes you are running ATG Dynamo on your local machine).</li>
	<p><b>Note</b>: The default user and password is <b>admin/admin</b>.</p>
	<li>Select <b>Configuration Manager -&gt; Default Configuration -&gt; System Paths</b>.</li>
	<li>Enter the full path of the <b>irontracksql.jar</b> file under Extend Dynamo's Classpath. For example:</li>
	<p class="code">C:\irontrack\irontracksql.jar.</p>
	<li>Enter the full path of the spy.properties file under Extend Dynamo's Classpath. For example:</li>
	<p class="code">C:\irontrack</p>
	<li>Click <b>Append to Classpath</b>.</li>
	<li>Confirm the new classpath value is correct under Extend Dynamo's Classpath.</li>
	<li>Restart ATG Dynamo by navigating to <b>http://localhost:8830</b> and clicking <b>Restart Dynamo</b>.</li>
    </ol> 
  <li>Modify the <b>realdriver</b> line in the <b>spy.properties</b> file to reflect your wrapped  database driver. The <b>realdriver</b> property is, by default, set to Oracle. For example:</li>
  <p class="code">realdriver=oracle.jdbc.driver.OracleDriver</p>
  <li>Change this line to reflect your database, For Example:</li>
  <p class="code">realdriver=solid.jdbc.SolidDriver</p>
  <p><b>Note</b>: The value in the previous line is just an example. You must use the actual driver value provided in the application server.</p>
  <li>Set the port number through which IronTrack SQL will communicate in the <b>spy.properties file</b>, as follows:</li>
  <p class="code">monitorport=<i>nnnn</i></p>
  <p>where <i>nnnn</i> is the IronTrack SQL port number; from the IronTrack SQL user interface, click on the <b>Config</b> button or select <b>Configure</b> from the <b>Server</b> to display the <b>Configuration</b> dialog, which displays the port number.</p>
  <p><img src="images/configDialog.jpg" alt="" border="0"></p>
  <li>Change ATG to use the P6Spy driver by completing the following steps:</li>
  <ol type="a">
    <li>Run the Admin Tool by logging in to <b>http://localhost:8830</b>.</li>
	<li>Select <b>Configuration Manager -&gt; Default Configuration -&gt; Connection Pools -&gt; JTDataSource -&gt; JDBC 1.x/2.x driver -&gt; Custom JDBC Information</b>.</li>
	<li>Enter the information exactly as you would for connecting to your database, except for the driver.</li>
	<li>Set the driver field to <b>com.p6spy.engine.spy.P6SpyDriver</b>.</li>
	<li>Click <b>Try to Connect</b>.</li>
	<li>Confirm that the ATG connection is successful.</li>
	<li>Click <b>Apply Changes</b>, if the connection is successful.</li>
	<li>Restart ATG Dynamo by navigating to <b>http://localhost:8830</b>.</li>
	<li>Click <b>Restart Dynamo</b>.</li>
  </ol> 

<p>Following is an example setup: </p>

<table cellspacing="2" cellpadding="2" border="1" frame="box">
<tr valign="left">
    <th>Property</th>
    <th>Value</th>
</tr>
<tr valign="left">
    <td><b>URL</b></td>
    <td class="code">jdbc:solid://localhost:1313</td>
</tr>
<tr valign="left">
    <td><b>Driver</b></td>
    <td class="code">com.p6spy.engine.spy.P6SpyDriver</td>
</tr>
<tr valign="left">
    <td><b>Database server name</b></td>
    <td class="code">localhost:1313</td>
</tr>
<tr valign="left">
    <td><b>User name</b></td>
    <td class="code">admin</td>
</tr>
<tr valign="left">
    <td><b>Password</b></td>
    <td class="code">admin</td>
</tr>
<tr valign="left">
    <td><b>Confirm password</b></td>
    <td class="code">admin</td>
</tr>
</table>
</ol>

<p>When you run your application, a log file (<b>spy.log</b>) is generated in the <b>C:\ATG\Dynamo5.1\home</b> directory. The log file contains a list of all of the database statements executed. You can change both the destination of <b>spy.log</b> and what it logs by editing the <b>spy.properties</b> file. Refer to <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>

<a name="install_sun"></a>

<h2>Installing IronTrack SQL on Sun iPlanet</h2>

<p>To install IronTrack SQL on Sun iPlanet</p>

<ol>
  <li>Run the <b>irontracksql-installer.jar</b> file. Refer to <a href="#install_running">Running the IronTrack SQL Installer</a>.<br></li>
  <li>Add <b>irontracksql.jar</b> and <b>p6spy.jar</b> to your classpath by running the command line executable <b>kregedit</b>.</li>
  <li>Under <b>Software\iPlanet -> 6.0 -> Java -> ClassPath</b>, modify the entry adding <b>spy-home</b> to the end of the classpath.</li>
  <li>Modify your application server to use the P6Spy driver by running the command line executable <b>jdbcsetup</b>.</li>
  <li>Add a new third-party JDBC configuration as shown in the following example:</li>
  <p class="code">Driver Identifier: spy<br>
  &nbsp;&nbsp;Driver Classname: com.p6spy.engine.spy.P6SpyDriver<br>
  &nbsp;&nbsp;Driver Classpath: spy-home\irontracksql.jar</p>
  <li>To tell IronTrack SQL about the wrapped database driver, register your DataSource by running the following command line executable:</li>
  <p class="code">iasdeploy regdatasource -user <i>iPlanet_admin_username</i> &nbsp;-password <i>iPlanet_admin_password</i>&nbsp; -host localhost -port <i>iPlanet_admin _port</i>&nbsp; <i>config_filename</i></p> 
  <p>where <i>iPlanet_admin_username</i> is your iPlanet admin username, <i>iPlanet_admin_password</i> is your iPlanet administrative password, <i>iPlanet_admin_port</i> is the iPlanet administrative port number, and <i>config_filename</i> is the fully-qualified path to the file containing your DataSource configuration.</p>
  <p>For example:</p>
  <p class="code">&lt;ias-resource&gt;<br>
  &nbsp;&nbsp;&lt;resource&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&lt;jndi-name&gt;jdbc/yourapp/ora-type4-spy&lt;/jndi-name&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&lt;jdbc&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;driver-type&gt;spy&lt;/driver-type&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;database-url&gt;jdbc:oracle:thin:@localhost:1521:orcl&lt;/database-url&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;username&gt;aladdin&lt;/username&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;password&gt;sesame&lt;/password>&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&lt;/jdbc&gt;<br>
  &nbsp;&nbsp;&lt;/resource&gt;<br>
  &lt;/ias-resource&gt;</p>
  <p><b>Note</b>: For more details about parameters passed to <b>iasdeploy</b> and the format of <i>config_filename</i>, refer to the iPlanet documentation.</p>
  <li>Set the port number through which IronTrack SQL will communicate in the <b>spy.properties file</b>, as follows:</li>
  <p class="code">monitorport=<i>nnnn</i></p>
  <p>where <i>nnnn</i> is the IronTrack SQL port number; from the IronTrack SQL user interface, click on the <b>Config</b> button or select <b>Configure</b> from the <b>Server</b> to display the <b>Configuration</b> dialog, which displays the port number.</p>
  <p><img src="images/configDialog.jpg" alt="" border="0"></p>
</ol>

<p>When you run your application, a log file (<b>spy.log</b>) is generated. The log file contains a list of all of the database statements executed. You can change both the destination of <b>spy.log</b> and what it logs by editing the <b>spy.properties</b> file. Refer to <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p> 

<a name="install_ibm"></a>

<h2>Installing IronTrack SQL on IBM WebSphere 4.0</h2>
<p>To install IronTrack SQL on IBM WebSphere 4.0</p>

<p><b>Note</b>: Before installing IronTrack SQL, configure your JDBC driver in your target application server as a DataSource.</p>

<ol>
  <li>Run the <b>irontracksql-installer.jar</b> file. Refer to <a href="#install_running">Running the IronTrack SQL Installer</a>.<br></li>
  <li>Move the <b>spy.properties</b> file to the <b>WebSphere/AppServer/properties</b> directory.</li>
  <li>Copy <b>irontracksql.jar</b> and <b>p6spy.jar</b> to the <b>WebSphere/AppServer/lib/app</b> directory.</li>
  <li>Run the WebSphere Administration tool by logging in to <b>http://localhost/9090/admin</b>.</li>
  <li>Under the WebSphere Administration Domain, open the <b>Resources</b> tree.</li>
  <li>Open the <b>JDBC Drivers</b> tree.</li>
  <li>Open the JDBC Driver you want to replace. The list of data sources defined for this driver displays.</li>
  <li>Click on the name of the data source to trace with IronTrack SQL. The configuration page for that data source displays.</li> 
  <li>Before making any changes, note the values of the following fields:</li>
  <ul>
    <li><b>DatabaseName</b></li>
	<li><b>Default User</b></li>
	<li><b>Default Password</b></li>
  </ul>
  <li>Click <b>Properties</b> to view the driver specific properties. Each of the items displayed in the table is a setting that the driver needs in order to connect to the database. Note the name and value of each item. In our MySQL example, the properties are as follows:</li>
  <p class="code">port 3306<br>
  &nbsp;&nbsp;serverName myhost</p>
  <li>Navigate to the previous page (the configuration page for the driver), and change the <b>JNDI Name</b> for the DataSource. For example, if the DataSource <b>JNDI Name</b> is <b>MySqlDS</b>, change it to <b>RealMySqlDS</b>.</li>
  <li>Click <b>JDBC Drivers</b> (in the left panel), to open the list of drivers.</li>
  <li>Click New to open a configuration page for a new driver.</li>
  <li>Accept the <b>User-defined JDBC Driver</b> selection.</li>
  <li>Click <b>Next</b>.</li>
  <li>Fill in the table with the following values:</li>
  <p class="code">Server Class Path = path_to_irontracksql.jar<br>
  &nbsp;&nbsp;Name = P6SpyDriver<br>
  &nbsp;&nbsp;Description = P6Spy JDBC tracing driver<br>
  &nbsp;&nbsp;Implementation Classname = com.p6spy.engine.spy.P6ConnectionPoolDataSource</p>
  <li>Click <b>OK</b>. The list of drivers displays that contains your new driver specifications.</li>
  <li>Open the new <b>JDBC Drivers</b> tree, which contains the P6SpyDriver.</li>
  <li>Open the <b>Data Sources</b> folder.</li>
  <li>Click <b>New</b> to create a new data source for P6SpyDriver.</li>
  <li>Set this data source as you did for the original configuration for your target driver, with the following exceptions:</li>
  <ul>
    <li>The data source name</li>
	<li>The driver specific properties</li> 
  </ul>
  <p>Use a different value for the data source name, and do not set any driver specific properties.</p>
  <li>Save the configuration.</li>
  <li>Configure the <b>spy.properties</b> file. Assuming you are using the MySQL driver from <b>mysql.com</b>, your data source related entries appear as follows:</li>
  <p class="code">realdatasource=RealMySqlDS<br>
  realdatasourceclass=com.mysql.jdbc.jdbc2.optional.MysqlDataSource<br>
  realdatasourceproperties=port;3306,serverName;myhost</p>
  <p><b>Note</b>: The items in <b>realdatasourceproperties</b> are the items that you recorded from the <b>Driver Specific</b> properties in your original data source configuration. See Data Source Replacement in <a href="configure.html">Advanced Configuration of IronTrack SQL</a> for more information about wrapping your data source.</p> 
  <!--li>Modify the <b>realdriver</b> line in the <b>spy.properties</b> file to reflect the wrapped database driver (<b>com.mysql.Driver</b>, in our example). An example of a modified <b>realdriver</b> line follows:</li>
  <p class="code">realdriver=com.mysql.Driver</p-->
  <li>Set the port number through which IronTrack SQL will communicate in the <b>spy.properties file</b>, as follows:</li>
  <p class="code">monitorport=<i>nnnn</i></p>
  <p>where <i>nnnn</i> is the IronTrack SQL port number; from the IronTrack SQL user interface, click on the <b>Config</b> button or select <b>Configure</b> from the <b>Server</b> to display the <b>Configuration</b> dialog, which displays the port number.</p>
  <p><img src="images/configDialog.jpg" alt="" border="0"></p>
  <li>Restart WebSphere, by using either the <b>FirstSteps</b> control panel or the scripts in the WebSphere <b>bin</b> directory.</li>
</ol>
<p>When you run your application, a log file (<b>spy.log</b>) is generated in the <b>bin</b> directory of the WebSphere server. The log file contains a list of all of the database statements executed. You can change both the destination of <b>spy.log</b> and what it logs by editing the <b>spy.properties</b> file. Refer to <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>

<a name="install_caucho"></a>

<h2>Installing IronTrack SQL on Caucho Resin</h2>

<p>To install IronTrack SQL on Resin</p>

<p><b>Note</b>: Since you typically write or otherwise obtain your own connection pool when using Resin, this procedure may differ by application.</p>

<ol>
  <li>Run the <b>irontracksql-installer.jar</b> file. Refer to <a href="#install_running">Running the IronTrack SQL Installer</a>.<br></li>
  <li>Copy the <b>irontracksql.jar</b>, <b>p6spy.jar</b>, <b>spy.properties</b>, and <b>log4j-1.2.8.jar</b> files from the top-level IronTrack SQL directory to the lib directory of your web application. An example of the path to your <b>lib</b> directory <b>is C:\resin-2.1.6\webapps\<i>your_app_name</i>\WEB-INF\lib</b>, where <i>your_app_name</i> is the name of your application.</li>
  <li>Modify Resin to use the P6Spy driver. Resin applications obtain their JDBC connection in a variety of ways. Most applications have the database driver name externalized as a configuration parameter. For example, in your <b>web.xml</b> file (which may reside in <b>C:\resin-2.1.6\webapps\your_app_name\WEB-INF</b>), you may have something similar to the following:</li> 
  <p class="code">&lt;init-param&gt;<br>
  &nbsp;&nbsp;&lt;param-name&gt;db.driver&lt;/param-name&gt;<br>
  &nbsp;&nbsp;&lt;!-- mysql (mm driver) --&gt;<br>
  &nbsp;&nbsp;&lt;param-value&gt;org.gjt.mm.mysql.Driver&lt;/param-value&gt;<br>
  &lt;/init-param&gt;</p> 
  <p>In this case, the <b>db.driver</b> parameter has a value of <b>org.gjt.mm.mysql.Driver</b>, which is the MySQL driver. Wherever this configuration information is stored, change the driver name (<b>org.gjt.mm.mysql.Driver</b>, in this example) to <b>com.p6spy.engine.spy.P6SpyDriver</b>, as in the following example:</p>
  <p class="code">&lt;init-param&gt;<br>
  &nbsp;&nbsp;&lt;param-name&gt;db.driver&lt;/param-name&gt;<br>
  &nbsp;&nbsp;&lt;!-- mysql (mm driver) --&gt;<br>
  &nbsp;&nbsp;&lt;param-value&gt;com.p6spy.engine.spy.P6SpyDriver&lt;/param-value&gt;<br>
  &lt;/init-param&gt;</p>
  <li>Modify the <b>realdriver</b> line in the <b>spy.properties</b> file to reflect your wrapped  database driver. For example:</li>
  <p class="code">realdriver=org.gjt.mm.mysql.Driver</p>
  <p><b>Note</b>: The value in the previous line is just an example. You must use the actual driver value provided in the application server.</p>
  <li>Set the port number through which IronTrack SQL will communicate in the <b>spy.properties file</b>, as follows:</li>
  <p class="code">monitorport=<i>nnnn</i></p>
  <p>where <i>nnnn</i> is the IronTrack SQL port number; from the IronTrack SQL user interface, click on the <b>Config</b> button or select <b>Configure</b> from the <b>Server</b> to display the <b>Configuration</b> dialog, which displays the port number.</p>
  <p><img src="images/configDialog.jpg" alt="" border="0"></p>
  <li>In your start-up script (for Unix), or startup command-line (for Windows), enable Resin to locate <b>spy.properties</b>. While all of the JAR files in your <b>lib</b> directory are, by default, included in Resin’s classpath, the <b>lib</b> directory itself is not. Resin will be unable to find your <b>spy.properties</b> file, which will result in an error. Therefore, you must include <b>spy.properties</b> in the Resin classpath. Use Resin’s command-line argument to specify the location of the <b>spy.properties</b> file. An example of passing the <b>p6.home</b> environment variable as a command-line argument to Resin’s <b>httpd</b> daemon on Windows follows:</li>
  <p class="code">C:\resin-2.1.6\bin\httpd - -Dp6.home=C:\resin-2.1.6\webapps\your_app_name\WEB-INF\lib</p>
</ol>
<p>When you run your application, a log file (<b>spy.log</b>) is generated. The log file contains a list of all of the database statements executed. You can change both the destination of <b>spy.log</b> and what it logs by editing the <b>spy.properties file</b>. Refer to <a href="configure.html">Advanced Configuration of IronTrack SQL</a>.</p>

<a name="install_uninstall"></a>

<h2>Uninstalling IronTrack SQL</h2>

<p>To uninstall the IronTrack SQL application, run the <b>uninstaller.jar</b> file located at the top level of the IronTrack SQL directory. Then remove the setting applied to your application by pointing it back to the original JDBC driver.</p>

<a name="install_upgrade"></a>

<h2>Upgrading IronTrack SQL</h2>

<p>To upgrade IronTrack SQL from a previous version, follow the procedures provided in sections of this document that address your application server.</p>

<p><b>Note</b>: IronGrid recommends uninstalling a previous version prior to upgrading.</p>

<a name="install_upgrade_appserver"></a>

<h2>Upgrading a Current IronTrack SQL Server Installation</h2>

<p>To upgrade IronTrack SQL on the application server</p>

<ol>
  <li>Copy <b>irontracksql.jar</b> to your application server and add its location to the server classpath.</li>
  <li>Add the following two lines to the <b>spy.properties</b> file:</li>
  <p class="code">module.monitor=com.irongrid.monitor.server.MonitorFactory<br>
  monitorport=<i>nnnn</i></p> 
  <p>where <i>nnnn</i> is the IronTrack SQL port number.</p>
</ol>

<p>When you run your application, a <b>spy.log</b> file is generated and the server module for IronTrack SQL is loaded on port <i>nnnn</i> based on the lines entered in <b>spy.properties</b> above. Run the client and configure the server and port options. Click on the <b>Connect</b> button to begin seeing data pass through. See <a href="configure.html">Advanced Configuration of IronTrack SQL</a> for more options.</p>

<a name="getting_started"></a>

<h1>Getting Started with the IronTrack SQL User Interface</h1>

<p>After you have installed and configured IronTrack SQL, you can begin using the graphical user interface to manage the performance of the SQL statements in your development environment. This document is intended to give you a general understanding of the basic features of the IronTrack SQL user interface.</p>

<p>From this document, you can access the following information:</p>

<ul>
        <li><a href="getting_started.html#getting_started_start_UI">Starting the IronTrack SQL User Interface</a></li>
        <li><a href="getting_started.html#getting_started_menu_area">Using the Menu Area</a></li>
        <li><a href="getting_started.html#getting_started_command_area">Using the Command Area</a></li>
        <li><a href="getting_started.html#getting_started_work_area">Using the Work Area</a></li>
        <li><a href="getting_started.html#getting_started_status_area">Using the Status Area</a></li>
        <li><a href="getting_started.html#getting_started_connecting">Connecting to the IronTrack SQL Server</a></li>
        <li><a href="getting_started.html#getting_started_disconnecting">Disconnecting from the IronTrack SQL Server</a></li>
        <li><a href="getting_started.html#getting_started_exporting">Exporting Datasets</a></li>
        <li><a href="getting_started.html#getting_started_importing">Importing a Dataset</a></li>
        <li><a href="getting_started.html#getting_started_purging_data">Purging Data </a></li>
        <li><a href="getting_started.html#getting_started_embedding">Testing Performance during Application Development</a></li>
</ul>

<a name="getting_started_start_UI"></a>

<h2>Starting the IronTrack SQL User Interface</h2>

<p>If the IronTrack SQL client is not currently running, you can start it now by double-clicking on the IronTrack SQL shortcut to display the IronTrack SQL user interface.</p>

<p><img src="images/clientViewText.jpg" alt="" border="0"></p>

<p>IronTrack SQL starts and attempts to connect to your server. You can launch IronTrack SQL, while the server is not running, but you cannot load data into the application until you start the server.</p>

<p>The IronTrack SQL user interface displays the following areas:</p>

<ul>
  <li>Menu area &mdash; Contains the menu options for performing IronTrack SQL operations.</li>
  <li>Command area &mdash; Contains command buttons for quickly accessing many of the commonly used IronTrack SQL operations.</li>
  <li>Work area &mdash; Displays the status of the SQL statements your application generates.</li>
  <li>Status area &mdash; Displays the status of the last IronTrack SQL you executed.</li>
</ul>

<a name="getting_started_menu_area"></a>

<h2>Using the Menu Area</h2>

<p>The menu area includes all of the operations that can be performed in the IronTrack SQL user interface. Which menu options appear is determined by whether you are using IronEye&trade; SQL or IronTrack SQL&trade;.</p>

<a name="getting_started_command_area"></a>

<h2>Using the Command Area</h2>

<p>The command area of the IronTrack SQL user interface includes the following command buttons:</p>

<ul>
  <li><b>Connect</b> &mdash; Connects the user interface to the application server you specified during installation.</li>
  <li><b>Disconnect</b> &mdash; Disconnects the user interface from your application server.</li>
  <li><b>Config</b> &mdash; Displays the <b>Configuration</b> dialog, which provides a way for you to change the following values:
  <ul>
    <li><b>Host Name</b> &mdash; Name of the application server.</li>
    <li><b>Port</b> &mdash; Port number on which IronTrack SQL listens. (Must be the same as the value defined in the <b>monitorport</b> property defined in the <b>spy.properties</b> file.</li>
    <li><b>Refresh Interval</b> &mdash; Refresh rate in milliseconds.</li>
  </ul></li>
  <li><b>Purge</b> &mdash; Deletes all SQL statements in the user interface and from the IronTrack SQL server.</li>
  <li><b>Import</b> &mdash; Displays a dialog that provides a way for you to specify a a file name from which to import the dataset.</li>
  <li><b>Export</b> &mdash; Displays the <b>Export Dataset</b> dialog, which provides a way for you to specify a dataset to export and a file name to which to export the dataset.</li>
  <li><b>About</b> &mdash; Displays the <b>About IronTrack SQL</b> dialog, which lists the copyrights associated with IronTrack SQL.</li>
  <!--p class="comment">6-27 Should there be an Import button?</p-->
</ul>

<a name="getting_started_work_area"></a>

<h2>Using the Work Area</h2>

<p>If you are using IronTrack SQL, you will see two tabs in the work area representing the following work areas:</p>

<ul>
  <li><b>SQL Monitoring</b></li>
  <li><b>Graphing</b></li>
</ul>

<p>You can double-click on an SQL statement in either tab to take you to the location of same statement in the other tab.</p>

<p>If you are using IronEye SQL, you will see only the Monitoring section.</p>

<p>From the work area, you can view the performance of your SQL statements, make adjustments to them, and compare the differences between datasets.</p>

<a name="getting_started_status_area"></a>

<h2>Using the Status Area</h2> 

<p>The status area displays the status of the last operation performed in the lower left-hand corner of the interface. The status area displays the current connection status in the lower right-hand corner of the interface. The drop-down menu in the status area provides a way for you to select among the available datasets to show in the interface. (Default is <b>current live data</b>.) If you have imported multiple datasets, use the down arrow to select which among datasets to display in the work area.</p>

<a name="getting_started_connecting"></a>

<h2>Connecting to the IronTrack SQL Server</h2>

<p>If you have started the application server with which IronTrack SQL is configured, the IronTrack SQL user interface automatically connects, when it starts up.</p>

<p>If you have not yet started the application server, to connect IronTrack SQL</p>

<ol>
  <li>Start the application server.</li>
  <li>From the IronTrack SQL user interface, click on the <b>Connect</b> button.</li>
</ol>

<p>The status area in the lower left-hand corner of the user interface indicates that you are connected to the server.</p>

<!--p>To change the server to which you will connect, click <b>Connect</b> from the menu bar.</p>

<p class="comment">6-27 The previous doesn't work the way the doc says. Is there a way to do this? Or should I just delete the sentence?</p-->

<a name="getting_started_disconnecting"></a>

<h2>Disconnecting from the Server</h2>

<p>To disconnect from your server, click <b>Disconnect</b> in the command area. </p>

<p>The connection status displays in the status bar.</p>

<a name="getting_started_exporting"></a>

<h2>Exporting Datasets</h2>

<p>IronTrack SQL enables you to easily export datasets that you have collected to an HTML, a CSV, or an XML file. Exporting datasets enables you to take a snapshot of a particular session of data, or allows you to view data in your browser or in spreadsheet form.</p>

<p>To export the current data displayed in the IronTrack SQL user interface</p>

<ol>
  <li>Click on the <b>Export</b> button to display the <b>Export Dataset</b> dialog.
  <p><img src="images/export.jpg" alt="" border="0"></p></li>
  <li>In the <b>Dataset version</b> field, enter a tag string that identifies the dataset.
  <li>In the <b>Export file</b> field, select a file or create a new file in which to save the data.</li>
</ol>

<p>The details of the export operation display in the status bar at the base of the IronTrack SQL interface.</p>

<p><b>Note</b>: The export operation ignores any filtering you have performed and save the entire dataset.</p>

<a name="getting_started_importing"></a>

<h2>Importing a Dataset</h2>

<p>After you have exported datasets to individual files, you can import them into the user interface and view their contents.</p>

<p>To import an existing dataset from a file</p>

<ol>
  <li>Click on the <b>Import</b> button to display the <b>Open</b> dialog.</li>
  <li>Navigate to the directory in which the file to import resides.</li>
  <li>In the <b>Files of Type</b> field, use the down arrow to select the type of file to import. (Can be CSV, HTML, or XML.)</li>
  <li>Click on the file to add it to the <b>File Name</b> field.</li>
  <li>Click on the <b>Open</b> button to import the file and return to the user interface.</li>
</ol>

<p><b>Note</b>: You can select the dataset to view by using the down arrow in the status area.</p>

<a name="getting_started_purging_data"></a>

<h2>Purging Data</h2>

<p>You can periodically purge data from IronTrack SQL. For example, you may want to clear out all of the SQL statements on both the interface and server, so you can begin evaluating another set of SQL statements. You could first purge existing data, then trigger your application to generate some database activity. Purging data deletes the contents of the <b>spy.log</b> file. Triggering SQL statement begins adding data back to the <b>spy.log</b> file.</p>

<p>To purge data from the client and server, complete the following steps:</p>

<ol>
  <li>Click <b>Purge</b>.</li>
  <li>Click <b>Yes</b> in the <b>Confirm</b> window.</li>
</ol>

<p>The status of the purge operation displays in the status bar in the lower left-hand corner of the user interface.</p>

<a name="getting_started_embedding"></a>

<h2>Testing Performance during Application Development</h2>

<p>After you have become familiar with the IronTrack SQL user interface, you can begin testing application performance on an incremental basis.</p>

<p>To begin testing the performance of your SQL statements</p>

<ol>
  <li>Ensure that your application is running on the application server.</li>
  <li>Ensure that IronTrack SQL is running and connected to the application.</li>
  <li>Exercise the parts of the application that make SQL queries.</li>
</ol>

<p>Results of the queries will begin to appear in the IronTrack SQL user interface. At this point, you can begin monitoring and managing your queries with IronTrack SQL.</p>

<a name="manage"></a>
<h1>Using the SQL Monitor Section</h1>

<!--p class="comment">6-30 Replace all images after Alan has changed the product name. Figure out how PaintShop Pro put the coordinates in the screenshot image and remove it.</p-->

<p>From the SQL Monitor section of IronTrack SQL, you can view the SQL statements initiated by your application and determine how often they are executed, the average time they take to execute, and the maximum amount of time they take to execute.</p>

<p>From this document, you can access the following information:</p>

<ul>
  <li><a href="#manage_interface">Interface Elements of the SQL Monitor Section</a></li>
  <li><a href="#manage_filtering_data">Filtering the List of SQL Statements</a></li>
  <li><a href="#manage_analyze">Analyzing SQL Statement Performance with the SLQ Monitor Section</a></li>
</ul>

<a name="manage_interface"></a>

<h2>Interface Elements of the SQL Monitor Section</h2>

<p>The SQL Monitor section of IronTrack SQL includes an intuitive interface to help you analyze and monitor the SQL statements generated by your application. The interface enables you to view information in multiple ways. The following image illustrates the main elements of the SQL Monitor section:</p>

<p><img src="images/monitorView.jpg" alt="" border="0"></p>

<p>The SQL Monitor user interface includes the following sections:</p>

<ul>
  <li>Legend &mdash; Displays a legend that illustrates how to interpret the performance of the highlighted row. For more information, see the <a href="#manage_determining_statement_performance_legend">legend</a> section of Determining Statement Performance.</li>
  <li>Filtering &mdash; Provides a way for you to filter out specified SQL statements in the SQL statement table. For more information, see <a href="#manage_filtering_data">Filtering the List of SQL Statements</a>.</li>
  <li>SQL statements &mdash; Displays the SQL statements generated by your application and the corresponding performance elements IronTrack SQL measures. For more information, see <a href="#manage_SQL_statement_table">The SQL Statement Table</a>.</li>
  <li>SQL Statement Syntax &mdash; Displays the full text highlighted SQL statement. (This text can be copy from the section and pasted elsewhere, if necessary.)</li>
  <li>Monitoring graphs &mdash; Displays performance of the highlighted SQL statement in graphic form. For more information, see the <a href="#manage_determining_statement_performance_graphs">graph</a> section of Determining Statement Performance.</li>
</ul>

<a name="manage_SQL_statement_table"></a>

<h3>The SQL Statement Table</h3>

<p>After your application has populated the user interface with query results, the SQL statement table displays the SQL statements that have completed execution. The table includes the following information about each statement:</p>

<ul>
  <li><b>SQL</b> &mdash; Displays the SQL statements that were run.</li>
  <li><b>Count</b> &mdash; Displays the number of times a SQL statement has run since the last time the server was purged.</li>
  <li><b>Avg Time</b> &mdash; Displays the average time a SQL statement took to complete, in milliseconds.</li>
  <li><b>Max Time</b> &mdash; Displays the maximum time a SQL statement took to complete, in milliseconds.</li>
</ul>

<a name="manage_determining_statement_performance"></a>

<h3>Visual Cues in the SQL Monitor Section</h3>
<p>IronTrack SQL provides the following visual cues to quickly assess the performance of your SQL statement execution:</p>
<ul>
  <li>Legends</li>
  <li>Colors</li>
  <li>Icons</li>
  <li>Graphs</li>
</ul>

<a name="manage_determining_statement_performance_legend"></a>

<p>The legend, which is located beneath the menu bar, provides quick visual cues about the execution of your statements.</p>

<p><img src="images/legend.jpg" alt="" border="0"></p>

<p>The colors in the top portion of the legend represent each phase of execution in the highlighted row, and provide a way for you to visually determine the amount of time required to prepare, execute, and retrieve data for a particular SQL statement. The following colors display in each column of the SQL statement table and in the graphs.</p>

<ul>
  <li><img src="images/legendPrepare.jpg"  alt="" border="0"> <b>Preparation</b> &mdash; Represents the amount of time to prepare the statement.</li>
  <li><img src="images/legendExecute.jpg" alt="" border="0"> <b>Execution</b> &mdash; Represents the amount of time to execute the statement.</li>
  <li><img src="images/legendRetrieve.jpg" alt="" border="0"> <b>Retrieval</b> &mdash; Represents the amount of time to retrieve the data.</li>
</ul>

<p>The following icons, listed in the legend, appear on the left-hand side of certain SQL statements</p>

<ul>
  <li><img src="images/objectSQLslow_lt.jpg"  alt="" border="0"> <b>Slowest</b> &mdash; The SQL statements that run most slowly.</li>
  <li><img src="images/objectSQLfrequent_lt.jpg"  alt="" border="0"> <b>Most Run</b> &mdash; The SQL statements run most often.</li>
  <li><img src="images/objectSQLboth_lt.jpg"  alt="" border="0"> <b>Both</b> &mdash; The slowest SQL statements that run most often.</li>
</ul>

<p>These icons represent the top ten percent of SQL statements running most slowly, most often, or both. You can use the icon legend, when viewing SQL statements in the SQL statement table to quickly determine potential bottlenecks.</p>

<a name="manage_determining_statement_performance_graphs"></a>

<p>Three graphs display at the bottom of the interface, using the colors also represented in the legend bar. </p>

<p><img src="images/graphs.jpg"  alt="" border="0"></p>

<p>As you select an SQL statement from the table, the details display in the <b>SQL Statement Syntax</b> text boxes. This data is then graphically represented in the graphs on the right, as follows:</p>

<ul>
  <li><b>Rows Returned</b> &mdash; Displays the maximum, average, and minimum rows returned that match the selected SQL statement.</li>
  <li><b>Time Performance</b> &mdash; Displays the maximum, average, and minimum completion times for the selected SQL statement.</li>
  <li><b>Count</b> &mdash; Displays the number of times the selected SQL statement has run since the last time the server was purged.</li>
</ul>

<p>A horizontal line in each graph indicates the value compared to the system average.</p>

<h3>Specifying the Columns That Appear in the SQL Statement Table</h3>

<p>You can change which columns appear in the SQL statement table.</p>

<p>To specify which columns will and will not appear in the SQL statement table</p>

<ol>
  <li>Select <b>View -> Configure columns</b> to display the <b>Columns</b> dialog.</li>
  <li>Select the check boxes to the left of the columns to appear in the SQL statement table; deselect the check boxes to not appear.</li>
  <li>Click on the <b>OK</b> button to return to the <b>SQL Monitor</b> section.</li>
</ol>

<p>The system implements your selections and displays accordingly.</p>

<h3>Specifying the Order in Which Columns Appear in the SQL Statement Table</h3>

<p>You can change the order in which the columns in the SQL statement table appear.</p>

<p>To change the order of the columns</p>

<ol>
  <li>Click and hold the mouse pointer on the column heading to move.</li>
  <li>Drag the column horizontally to the new position in the SQL statement table.</li>
  <li>Release the mouse button to display the new order for the columns.</li>
</ol>

<h3>Specifying the Types of Statements That Appear in the SQL Statement Table</h3>

<p>You can view the results of your SQL queries on the following ways:</p>

<ul>
  <li>All queries &mdash; Shows the results of every SQL statement executed by your application.</li>
  <li>Prepared statements &mdash; Shows only the prepared statements executed by your application.</li>
  <li>Bound variable &mdash; Shows the actual values of the SQL statements that are passed through the prepared statements.</li>
</ul>

<p>You can monitor the performance of your application's SQL statements by changing the view to display only the prepared statements, checking for the worst performing prepared statements, then changing the view to display the statements that include bound variables.</p>

<h4>Changing the View to Display Prepared Statements</h4>

<p>To view only prepared statements, select <b>View -> Show Queries -> Prepared Statements</b>. In the SQL statement table, IronTrack SQL displays only the prepared statements executed by your application. </p>

<p>From there, you can determine which statements are performing poorly. Then you can change the view to display the bound variables and determine which specific inputs are performing poorly.</p>

<h4>Changing the View to Display Bound Variables</h4>

<p>To view bound variables, select <b>View -> Show Queries -> Bound Variables</b>. In the SQL statement table, IronTrack SQL displays all of the statements containing bound variables</p>

<p>From there, you can determine which statements are performing poorly and take the appropriate action in your application. After you have made changes to your SQL statements, you can run your application against IronTrack SQL again and see where you have made improvements to the efficiency of the statements.</p>

<a name="manage_filtering_data"></a>

<h2>Filtering the List of SQL Statements</h2>

<p>You can filter the results that are displayed in the SQL statement table, so that only the statements that are important to you appear.</p>

<p>IronTrack SQL provides the following three types of filtering:</p>

<ul>
  <li><a href="#manage_SQL_statement_filtering">SQL Statement Filtering</a></li>
  <li><a href="#manage_SQL_range_filtering">SQL Range Filtering</a></li>
  <li><a href="#manage_combination_filtering">Combination Filtering</a></li>
</ul>

<p>In general, to apply a filter to the SQL statement table</p>

<ol>
  <li>Click on the <b>Filter</b> button to display the <b>Filtering</b> section.
  <p><img src="images/filter1.jpg" alt="" border="0"></p>
  <p>The filtering section lists the following elements on which you can filter:</p>
  <ul>
    <li><b>SQL</b> (statement type) &mdash; Can be an entire SQL statement or any substring thereof.</li>
	<li><b>Count</b> (value range) &mdash; Specifies the count or count range on which to filter. The count is the number of times the statement has run, since the last time the server was purged.</li>
    <li><b>Rows (value range)</b> &mdash; Specifies a row or range of rows on which to filter, based on the number of rows returned by a query.</li>
	<li><b>Avg Time</b> (value range) &mdash; Specifies the average time on which to filter, in milliseconds.</li>
	<li><b>Max Time</b> (value range) &mdash; Specifies the minimum time or maximum time period on which to filter, in milliseconds.</li>
	<li><b>Min Time</b> (value range) &mdash; Specifies the minimum time or maximum time period on which to filter, in milliseconds.</li>
  </ul></li>
  <li>Enter the criteria on which to filter.</li>
  <li>Click on the <b>Apply Filter</b> button to remove from view all SQL statement results except those that meet the filter criteria.</li>
</ol>

<a name="manage_SQL_statement_filtering"></a>

<h3>SQL Statement Filtering</h3>

<p>Using SQL statement filtering, you can filter the view based on any or all elements of an SQL statement. SQL statement filtering compares strings with the text of your SQL statement. For example, you can filter on all <b>SELECT</b> or <b>INSERT</b> statements, or you can filter on one of the tables that your statements access, or you can filter on a specific column in a table.</p>

<p>To filter based on SQL statements</p>

<ol>
  <li>Click the <b>Filtering</b> button to display the <b>Filtering</b> section. </li>
  <li>In the <b>SQL</b> field, enter the text to match to the SQL statements on which to filter.</li>
  <li>Click on the <b>Apply Filter</b> button to run the filter and display the results in the SQL statement table.</li>
  <li>Click <b>Clear Filter</b> to clear the current filter, to apply a new filter, or to view unfiltered data.</li>
</ol>

<p><b>Note</b>: SQL filtering does not support wildcards.</p>

<a name="manage_SQL_range_filtering"></a>

<h3>SQL Range Filtering</h3>

<p>Using SQL range filtering, you can filter the view based on values ranges for the columns in the SQL statement table that contain results from the SQL statements that have been executed in your application.</p>

<p>To filter using a range</p>

<ol>
  <li>Click the <b>Filtering</b> button to display the <b>Filtering</b> section.</li>
  <li>Enter numeric values in the fields of the <b>Values between</b> area.
  <p><b>Note</b>: You can enter either a starting value, an ending value, or both; however, you are not required to enter both to apply a filter.</p> </li>
  <li>Click <b>Apply Filter</b> to run the filter. </li>
  <p>The results of your filter display in the <b>SQL Statement</b> table.</p>
  <li>Click <b>Clear Filter</b> to clear the current filter, to apply a new filter, or to view unfiltered data.</li>
</ol>

<a name="manage_combination_filtering"></a>

<h3>Combination Filtering</h3>

<p>To use both SQL filtering and value range filtering</p>

<ol>
  <li>Click the <b>Filtering</b> button to display the <b>Filtering</b> section.</li>
  <li>In the <b>SQL Statement Syntax</b> field, enter the text to match to the SQL statements. For more information, refer to <a href="#manage_SQL_statement_filtering">SQL Statement Filtering.</a></li>
  <li>Enter numeric values in the fields of the <b>Values between</b> area. For more information, refer to <a href="#manage_SQL_range_filtering">SQL Range Filtering</a>.</li>
  <li>Click <b>Apply Filter</b> to run the combined filter.</li>
</ol>

<p>The results of your filter display in the <b>SQL Statement</b> table.</p>

<a name="manage_clearing_filters"></a>

<h3>Clearing Filters</h3>

<p>To clear all filters from your data, click <b>Clear Filters</b>. The unfiltered data displays.</p>

<a name="manage_analyze"></a>

<h2>Analyzing SQL Statement Performance with the SQL Monitor Section</h2>

<p>After you have become familiar with the elements that make up the SQL Monitor section, you can begin using IronTrack SQL to analyze the SQL statements your application executes.</p>

<p>Using IronTrack SQL, you can focus on improving the queries that harm database performance the most.  The following list describes some improvements you can make, based on the types of problems that IronTrack SQL helps discover:</p>

<ul>
  <li><b><i>High preparation time</i></b> &mdash; Queries that require high preparation time may perform unnecessary activities in the time between when a statement is initialized and when it is executed.  Consider moving any code related to building the SQL query before creating the Statement object.
  <p></p></li>
  <li><b><i>Frequent queries</i></b> &mdash; Consider queries that are called frequently as candidates for data caching.  Simple caching strategies involve copying the <b>RecordSet</b> values into a Collection object or using the <b>CacheRowSet</b> API described in this article at JavaWorld: <a href="http://www.javaworld.com/javaworld/jw-02-2001/jw-0202-cachedrow_p.html" target="_new">http://www.javaworld.com/javaworld/jw-02-2001/jw-0202-cachedrow_p.html</a>.
  <p>Consider converting repeat queries of the same basic form to a prepared statement.  The Java <b>PreparedStatement</b> object gives the database an opportunity to pre-parse the query, which can save time when a query is called repeatedly.</p>
  <p>Consider consolidating multiple queries of the same table into a single statement. For example, your application may query the database to retrieve a list of all IDs from a table, then loop through the list to instantiate a bean for each ID. Each bean instantiation may, in turn, require a separate query to the database. By changing the bean’s constructor to allow for an alternative instantiation, you can consolidate thousands of queries into a single query, reducing the execution time significantly.</p></li>
  <li><b><i>High execution time</i></b> &mdash; Time spent in the <b>executeQuery()</b> or <b>executeUpdate()</b> methods is time that the database is spending to process and execute the query.  As a result, performance optimization can be approached from two directions &mdash; from the application side and the database side.
  <p>In the application, you can attempt to simplify queries to make them easier for the database to interpret. If the query is repeatedly called, converting the query to a prepared statement would lower the cost of repeat query parsing.  Also examine queries to consider if they can be rewritten to avoid complex joins, or if the table design can be re-analyzed to improve performance.  Another execution bottleneck may be database-layer scripts such as triggers and stored procedures.  Strictly speaking, executing a script in the database layer is sub-optimal for two reasons:</p>
  <ul>
    <li>It requires CPU cycles on the most constricted resource.</li>
	<li>Script execution is not the strength of the database.</li>
  </ul>  
  <p>Run the programmatic code on the application layer rather than the database, because compiled code will generally be faster and does not take cycles away from the bottleneck resource.  Alternatively, consider rewriting the SQL or database script to improve its execution time, for example, by using a compound or nested statement instead of an iterative statement.</p>
  <p>In the database, work with the database administrator to investigate improvements to the database configuration such as adding indexes, increasing the SQL parsing cache, optimizing disk I/O by separating database tables from logs, and implementing database-specific hinting mechanisms (for example, Oracle’s <b>/* */</b> syntax) and idioms that improve the database query execution plan.</p></li>
  <li><b><i>High retrieval time</i></b> &mdash; Retrieval time includes all of the time spent returning records from the database to the application.  The primary drivers of this time are the number of rows returned, and the amount of data in each row.  Examine queries for opportunities to limit the number of columns, rows, or both returned.  If the database stores large amounts of data in a table (such as employee photos), returning the entire table using a <b>SELECT *</b> statement may transfer an unnecessarily large amount of data across the network.  Consider returning fewer records, fewer columns, or both.    Also, consider whether all of the rows are needed at once, or if paging can be used to download only the data needed for the current step in execution.</li>
</ul>

<p>To analyze your SQL statements using IronTrack SQL</p>

<ol>
  <li>Start your application.</li>
  <li>Start IronTrack SQL.</li>
  <li>Begin running commands in the application that execute the SQL statements to monitor. (The results of executing your SQL statements will appear in the SQL statement table.)</li>
  <li>Change the view in IronTrack SQL to show only the prepared statements.<br>
  &mdash; OR &mdash;<br>
  Filter the view to display only the statements that are important to you.</li>
  <li>Check the status of the prepared statements to see which ones appear to be running the least efficiently.</li>
  <li>Change the view in IronTrack SQL to show only bound variables.</li>
  <li>Check the status of the bound variables to see which ones appear to be running the least efficiently.</li>
  <li>Export the results as a dataset.</li>
  <li>Make any necessary changes to your application code to improve the efficiency of the SQL statements.</li>
  <li>Purge the existing results.</li>
  <li>Repeat the previous steps.</li>
  <li>Compare the most recent changes with the exported dataset to see the improvements in SQL statement efficiency.</li>
</ol>



	
	
	<!-- End Content -->
	
	
	</td>
  </tr>
</table>
</body>
</html>
